!function t(n,e,r){function o(s,u){if(!e[s]){if(!n[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[s]={exports:{}};n[s][0].call(f.exports,function(t){var e=n[s][1][t];return o(e?e:t)},f,f.exports,t,n,e,r)}return e[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,n,e){function r(){f=!1,u.length?c=u.concat(c):l=-1,c.length&&o()}function o(){if(!f){var t=setTimeout(r);f=!0;for(var n=c.length;n;){for(u=c,c=[];++l<n;)u&&u[l].run();l=-1,n=c.length}u=null,f=!1,clearTimeout(t)}}function i(t,n){this.fun=t,this.array=n}function s(){}var u,a=n.exports={},c=[],f=!1,l=-1;a.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new i(t,n)),1!==c.length||f||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],2:[function(t,n,e){(function(t){!function(r){function o(t){throw RangeError(A[t])}function i(t,n){for(var e=t.length,r=[];e--;)r[e]=n(t[e]);return r}function s(t,n){var e=t.split("@"),r="";e.length>1&&(r=e[0]+"@",t=e[1]),t=t.replace(I,".");var o=t.split("."),s=i(o,n).join(".");return r+s}function u(t){for(var n,e,r=[],o=0,i=t.length;i>o;)n=t.charCodeAt(o++),n>=55296&&56319>=n&&i>o?(e=t.charCodeAt(o++),56320==(64512&e)?r.push(((1023&n)<<10)+(1023&e)+65536):(r.push(n),o--)):r.push(n);return r}function a(t){return i(t,function(t){var n="";return t>65535&&(t-=65536,n+=U(t>>>10&1023|55296),t=56320|1023&t),n+=U(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:x}function f(t,n){return t+22+75*(26>t)-((0!=n)<<5)}function l(t,n,e){var r=0;for(t=e?L(t/j):t>>1,t+=L(t/n);t>q*S>>1;r+=x)t=L(t/q);return L(r+(q+1)*t/(t+O))}function h(t){var n,e,r,i,s,u,f,h,p,d,m=[],y=t.length,v=0,g=D,b=P;for(e=t.lastIndexOf(E),0>e&&(e=0),r=0;e>r;++r)t.charCodeAt(r)>=128&&o("not-basic"),m.push(t.charCodeAt(r));for(i=e>0?e+1:0;y>i;){for(s=v,u=1,f=x;i>=y&&o("invalid-input"),h=c(t.charCodeAt(i++)),(h>=x||h>L((_-v)/u))&&o("overflow"),v+=h*u,p=b>=f?k:f>=b+S?S:f-b,!(p>h);f+=x)d=x-p,u>L(_/d)&&o("overflow"),u*=d;n=m.length+1,b=l(v-s,n,0==s),L(v/n)>_-g&&o("overflow"),g+=L(v/n),v%=n,m.splice(v++,0,g)}return a(m)}function p(t){var n,e,r,i,s,a,c,h,p,d,m,y,v,g,b,w=[];for(t=u(t),y=t.length,n=D,e=0,s=P,a=0;y>a;++a)m=t[a],128>m&&w.push(U(m));for(r=i=w.length,i&&w.push(E);y>r;){for(c=_,a=0;y>a;++a)m=t[a],m>=n&&c>m&&(c=m);for(v=r+1,c-n>L((_-e)/v)&&o("overflow"),e+=(c-n)*v,n=c,a=0;y>a;++a)if(m=t[a],n>m&&++e>_&&o("overflow"),m==n){for(h=e,p=x;d=s>=p?k:p>=s+S?S:p-s,!(d>h);p+=x)b=h-d,g=x-d,w.push(U(f(d+b%g,0))),h=L(b/g);w.push(U(f(h,0))),s=l(e,v,r==i),e=0,++r}++e,++n}return w.join("")}function d(t){return s(t,function(t){return C.test(t)?h(t.slice(4).toLowerCase()):t})}function m(t){return s(t,function(t){return T.test(t)?"xn--"+p(t):t})}var y="object"==typeof e&&e&&!e.nodeType&&e,v="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof t&&t;(g.global===g||g.window===g||g.self===g)&&(r=g);var b,w,_=2147483647,x=36,k=1,S=26,O=38,j=700,P=72,D=128,E="-",C=/^xn--/,T=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=x-k,L=Math.floor,U=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:u,encode:a},decode:h,encode:p,toASCII:m,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(y&&v)if(n.exports==y)v.exports=b;else for(w in b)b.hasOwnProperty(w)&&(y[w]=b[w]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,n,e){"use strict";function r(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.exports=function(t,n,e,i){n=n||"&",e=e||"=";var s={};if("string"!=typeof t||0===t.length)return s;var u=/\+/g;t=t.split(n);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=t.length;a>0&&c>a&&(c=a);for(var f=0;c>f;++f){var l,h,p,d,m=t[f].replace(u,"%20"),y=m.indexOf(e);y>=0?(l=m.substr(0,y),h=m.substr(y+1)):(l=m,h=""),p=decodeURIComponent(l),d=decodeURIComponent(h),r(s,p)?o(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],4:[function(t,n,e){"use strict";function r(t,n){if(t.map)return t.map(n);for(var e=[],r=0;r<t.length;r++)e.push(n(t[r],r));return e}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};n.exports=function(t,n,e,u){return n=n||"&",e=e||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(s){var u=encodeURIComponent(o(s))+e;return i(t[s])?r(t[s],function(t){return u+encodeURIComponent(o(t))}).join(n):u+encodeURIComponent(o(t[s]))}).join(n):u?encodeURIComponent(o(u))+e+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var n=[];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}},{}],5:[function(t,n,e){"use strict";e.decode=e.parse=t("./decode"),e.encode=e.stringify=t("./encode")},{"./decode":3,"./encode":4}],6:[function(t,n,e){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,n,e){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,n,e),o}function i(t){return a(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,n){return o(t,!1,!0).resolve(n)}function u(t,n){return t?o(t,!1,!0).resolveObject(n):n}function a(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function f(t){return null===t}function l(t){return null==t}var h=t("punycode");e.parse=o,e.resolve=s,e.resolveObject=u,e.format=i,e.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(y),g=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,_=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=t("querystring");r.prototype.parse=function(t,n,e){if(!a(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=p.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(e||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||o&&S[o]||(r=r.substr(2),this.slashes=!0)}if(!S[o]&&(s||o&&!O[o])){for(var u=-1,c=0;c<b.length;c++){var f=r.indexOf(b[c]);-1!==f&&(-1===u||u>f)&&(u=f)}var l,d;d=-1===u?r.lastIndexOf("@"):r.lastIndexOf("@",u),-1!==d&&(l=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(l)),u=-1;for(var c=0;c<g.length;c++){var f=r.indexOf(g[c]);-1!==f&&(-1===u||u>f)&&(u=f)}-1===u&&(u=r.length),this.host=r.slice(0,u),r=r.slice(u),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),c=0,P=y.length;P>c;c++){var D=y[c];if(D&&!D.match(_)){for(var E="",C=0,T=D.length;T>C;C++)E+=D.charCodeAt(C)>127?"x":D[C];if(!E.match(_)){var I=y.slice(0,c),A=y.slice(c+1),q=D.match(x);q&&(I.push(q[1]),A.unshift(q[2])),A.length&&(r="/"+A.join(".")+r),this.hostname=I.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var L=this.hostname.split("."),U=[],c=0;c<L.length;++c){var K=L[c];U.push(K.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(K):K)}this.hostname=U.join(".")}var N=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+N,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!k[i])for(var c=0,P=v.length;P>c;c++){var R=v[c],F=encodeURIComponent(R);F===R&&(F=escape(R)),r=r.split(R).join(F)}var M=r.indexOf("#");-1!==M&&(this.hash=r.substr(M),r=r.slice(0,M));var z=r.indexOf("?");if(-1!==z?(this.search=r.substr(z),this.query=r.substr(z+1),n&&(this.query=j.parse(this.query)),r=r.slice(0,z)):n&&(this.search="",this.query={}),r&&(this.pathname=r),O[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var N=this.pathname||"",K=this.search||"";this.path=N+K}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var n=this.protocol||"",e=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=j.stringify(this.query));var s=this.search||i&&"?"+i||"";return n&&":"!==n.substr(-1)&&(n+=":"),this.slashes||(!n||O[n])&&o!==!1?(o="//"+(o||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),n+o+e+s+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(a(t)){var n=new r;n.parse(t,!1,!0),t=n}var e=new r;if(Object.keys(this).forEach(function(t){e[t]=this[t]},this),e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(n){"protocol"!==n&&(e[n]=t[n])}),O[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e;if(t.protocol&&t.protocol!==e.protocol){if(!O[t.protocol])return Object.keys(t).forEach(function(n){e[n]=t[n]}),e.href=e.format(),e;if(e.protocol=t.protocol,t.host||S[t.protocol])e.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),e.pathname=o.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var i=e.pathname||"",s=e.search||"";e.path=i+s}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var u=e.pathname&&"/"===e.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=c||u||e.host&&t.pathname,p=h,d=e.pathname&&e.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],m=e.protocol&&!O[e.protocol];if(m&&(e.hostname="",e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),h=h&&(""===o[0]||""===d[0])),c)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),e.search=t.search,e.query=t.query;else if(!l(t.search)){if(m){e.hostname=e.host=d.shift();var y=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;y&&(e.auth=y.shift(),e.host=e.hostname=y.shift())}return e.search=t.search,e.query=t.query,f(e.pathname)&&f(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!d.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var v=d.slice(-1)[0],g=(e.host||t.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!h&&!p)for(;b--;b)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),g&&"/"!==d.join("/").substr(-1)&&d.push("");var _=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){e.hostname=e.host=_?"":d.length?d.shift():"";var y=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;y&&(e.auth=y.shift(),e.host=e.hostname=y.shift())}return h=h||e.host&&d.length,h&&!_&&d.unshift(""),d.length?e.pathname=d.join("/"):(e.pathname=null,e.path=null),f(e.pathname)&&f(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},r.prototype.parseHost=function(){var t=this.host,n=d.exec(t);n&&(n=n[0],":"!==n&&(this.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(this.hostname=t)}},{punycode:2,querystring:5}],7:[function(t,n,e){function r(){"use strict";var t=this,n=localStorage.proconListLastUpdate,e=localStorage.proconControlLength,r=6048e5;Object.defineProperties(this,{lastUpdate:{get:function(){return n},set:function(t){n=t,localStorage.proconListLastUpdate=t}},controlLength:{get:function(){return e},set:function(t){e=t,localStorage.proconControlLength=t}},UpdateDelayTime:{get:function(){return r},set:function(t){r=t,localStorage.updateDelayTime=t}},Url:{enumerable:!0,writable:!1,value:"http://sistemas.procon.sp.gov.br/evitesite/list/evitesite.php?action=list&jtStartIndex=0&jtPageSize=600&jtSorting=dtInclusao%20DESC"},dbName:{enumerable:!0,writable:!1,value:"ProconList"}}),this.db=new s(t.dbName),this.db.version(1).stores({webSites:"url, date"}),this.db.open().then(function(){"undefined"==typeof t.lastUpdate?t.createDB():t.update()})}var o=t("Async"),i=t("./functions.js"),s=t("dexie");n.exports=r,r.prototype.createDB=function(){"use strict";console.log("Creating DB...");var t=this,n=function(){throw new Error("List Creation Failed, aborting application, Request Status: "+this.statusText)},e=function(){t.lastUpdate=Date.now(),t.controlLength=this.response.length,o.each(JSON.parse(this.response).Records,function(n,e){t.db.webSites.put({date:new Date(n.dtInclusao.split("/").reverse().join("/")),cnpj:n.strCNPJ,name:n.strEmpresa,url:n.strSite}).then(e)},function(){console.log("DB Created...")})};i.download().url(this.Url).success(e).error(n).abort(n).done()},r.prototype.update=function(){"use strict";var t=Date.now();if(this.lastUpdate-t>=this.UpdateDelayTime){var n=this,e=function(){n.controlLength!==this.response.length?(console.log("Need Update..."),n.updateDB(JSON.parse(this.response).Records),n.controlLength=this.response.length):console.log("Don't Need Update..."),n.lastUpdate=t},r=function(){console.error("List Update Failed, Request Status: "+this.statusText)};i.download().url(this.Url).success(e).error(r).abort(r).done()}else console.log("Don't Need Update...")},r.prototype.updateDB=function(t){"use strict";console.log("Updating DB...");var n=this;this.db.webSites.orderBy("date").last(function(e){o.each(t,function(t,r){var o=new Date(t.dtInclusao.split("/").reverse().join("/"));e.date<o?(console.log("New Item Found, Adding to DB..."),n.db.webSites.put({date:o,cnpj:t.strCNPJ,name:t.strEmpresa,url:t.strSite}).then(r)):r()},function(){console.log("DB Updated...")})})},r.prototype.exists=function(t,n){"use strict";this.db.webSites.where("url").equalsIgnoreCase(t).count().then(function(t){n(null,!!t)})["catch"](function(t){n(t)})}},{"./functions.js":10,Async:11,dexie:13}],8:[function(t,n,e){function r(){}var o=t("./functions.js");t("url");Object.defineProperties(r,{queryUrl:{writable:!1,enumerable:!0,value:"http://www.reclameaqui.com.br/busca/?q="},restIdUrl:{writable:!1,enumerable:!0,value:"http://ws04.reclameaqui.com.br/reclameaqui-api-empresa/rest/empresa/"}}),n.exports=r,window.ReclameAqui=r,r.prototype.query=function(t,n){"use strict";n="function"==typeof n?n:function(){};var e=function(){n(new Error("Failed to download, Request Status: "+this.statusText))},i=function(){var i=this.response.querySelector(".btn-tudo-sobre-empresa");if(i){var s=i.attributes[0].value,u=function(){var i=this.response.querySelector(".lista-info-company");if(i&&i.children.length>0&&(i=i.children[1].children[0].innerHTML,-1!==i.indexOf(t))){var u=function(){var t=this.response;t.ps=Number(t.ps.split(",").join(".")),n(null,t)};return void o.download().url(r.restIdUrl+s.split("/")[4]).type("json").success(u).error(e).abort(e).done()}n(null,null)};o.download().url(s).type("document").success(u).error(e).abort(e).done()}else{if(this.response.querySelector("meta[http-equiv=CacheControl]"))return void n(null,n);n(null,null)}};o.download().url(r.queryUrl+t).type("document").success(i).error(e).abort(e).done()}},{"./functions.js":10,url:6}],9:[function(t,n,e){(function(n){var e=t("./ProconList.js"),r=t("./ReclameAqui.js"),o=t("async"),i=t("./functions.js");!function(){"use strict";function t(t,n,e){if("complete"===n.status&&/^(http|https):\/\//.test(e.url)){console.assert(t===e.id,"Id's das tabs sao diferentes");var r=p[i.cleanUrl(e.url)],s=!1;if(!r)throw new Error("Inconsistency Error, not found reference to site: "+i.cleanUrl(e.url));if(r.currentTabsId.forEach(function(n){n===t&&(s=!0)}),!s){r.currentTabsId.push(t);var u=d[t];if(u){for(var a=0;a<u.currentTabsId.length;a++)if(u.currentTabsId[a]===t){u.currentTabsId.splice(a,1);break}u.currentTabsId.length||delete p[u.url]}d[t]=r}o.whilst(function(){return"complete"!==r.status},function(t){o.nextTick(t)},function(){(r.procon||r.reclameAqui)&&chrome.pageAction.show(t)})}}function s(t){var n=d[t];if(n){delete d[t];for(var e=0;e<n.currentTabsId.length;e++)if(n.currentTabsId[e]===t){n.currentTabsId.splice(e,1);break}n.currentTabsId.length||delete p[n.url]}}function u(t){if(0===t.frameId){var n=i.cleanUrl(t.url);if(p[n])return;var e=p[n]={url:n,status:"loading",currentTabsId:[]};o.parallel({procon:function(t){l.exists(n,t)},reclameAqui:function(e){h.query(n,function(n,o){n&&(console.error("Error ao verificar empresa no Reclame Aqui"),e(n)),"function"==typeof o?f?(console.warn("Trying again..."),setTimeout(function(){h.query(t.url,o)},250)):(console.warn("Can't reach ReclameAqui, reloading iframe and trying again..."),f=!0,c.onload=function(){c.onload=null,console.log("Response arrived"),h.query(t.url,o)},c.src=r.queryUrl):(c.src="",f=!1,e(null,o))})}},function(t,r){if(t)throw t;console.log(n+":\n	"+(r.procon?"":"Não ")+"Existe na Lista do Procon\n	"+(r.reclameAqui?"":"Não ")+"Está Contido no ReclameAqui"),e.status="complete",e.procon=r.procon,e.reclameAqui=r.reclameAqui})}}function a(t){"popup"===t.name&&t.onMessage.addListener(function(n){switch(n.type){case"ui":chrome.tabs.query({active:!0},function(n){var e=d[n[0].id];e.type="ui",t.postMessage(e)})}})}var c=document.createElement("iframe");document.body.appendChild(c);var f=!1,l=n.proconList=new e,h=n.reclameaqui=new r,p={},d={};console.log("Start Extension..."),chrome.webNavigation.onBeforeNavigate.addListener(u,{schemes:["http","https"]}),chrome.tabs.onUpdated.addListener(t),chrome.tabs.onRemoved.addListener(s),chrome.runtime.onConnect.addListener(a)}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ProconList.js":7,"./ReclameAqui.js":8,"./functions.js":10,async:12}],10:[function(t,n,e){n.exports.cleanUrl=function(t){"use strict";if("string"!=typeof t)return"";var n=t.indexOf("://"),e=t.indexOf("www.");return t.substr(-1!==n?e===n+3?e+4:n+3:0===e?4:0).split("/")[0]},n.exports.download=function(){"use strict";return{_type:"text",type:function(t){return this._type="string"==typeof t?t:this._type,this},_method:"GET",method:function(t){return this._method="string"==typeof t?t:this._method,this},_url:"",url:function(t){return this._url="string"==typeof t?t:this._url,this},request:new XMLHttpRequest,_success:function(){},success:function(t){return this._success="function"==typeof t?t:this._success,this},_error:function(){},error:function(t){return this._error="function"==typeof t?t:this._error,this},_abort:function(){},abort:function(t){return this._abort="function"==typeof t?t:this._abort,this},done:function(){this.request.addEventListener("load",this._success),this.request.addEventListener("error",this._error),this.request.addEventListener("abort",this._abort),this.request.open(this._method,this._url,!0),this.request.responseType=this._type,this.request.send()}}}},{}],11:[function(t,n,e){(function(t,e){!function(){function r(){}function o(t){return t}function i(t){return!!t}function s(t){return!t}function u(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function a(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function c(t){return R(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function f(t,n){return c(t)?l(t,n):m(t,n)}function l(t,n){for(var e=-1,r=t.length;++e<r;)n(t[e],e,t)}function h(t,n){for(var e=-1,r=t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function p(t){return h(Array(t),function(t,n){return n})}function d(t,n,e){return l(t,function(t,r,o){e=n(e,t,r,o)}),e}function m(t,n){l(M(t),function(e){n(t[e],e)})}function y(t,n){for(var e=0;e<t.length;e++)if(t[e]===n)return e;return-1}function v(t){var n,e,r=-1;return c(t)?(n=t.length,function(){return r++,n>r?r:null}):(e=M(t),n=e.length,function(){return r++,n>r?e[r]:null})}function g(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),r=Array(e),o=0;e>o;o++)r[o]=arguments[o+n];switch(n){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function b(t){return function(n,e,r){return t(n,r)}}function w(t){return function(n,e,o){o=a(o||r),n=n||[];var i=v(n);if(0>=t)return o(null);var s=!1,c=0,f=!1;!function l(){if(s&&0>=c)return o(null);for(;t>c&&!f;){var r=i();if(null===r)return s=!0,void(0>=c&&o(null));c+=1,e(n[r],r,u(function(t){c-=1,t?(o(t),f=!0):l()}))}}()}}function _(t){return function(n,e,r){return t(K.eachOf,n,e,r)}}function x(t){return function(n,e,r,o){return t(w(e),n,r,o)}}function k(t){return function(n,e,r){return t(K.eachOfSeries,n,e,r)}}function S(t,n,e,o){o=a(o||r);var i=[];t(n,function(t,n,r){e(t,function(t,e){i[n]=e,r(t)})},function(t){o(t,i)})}function O(t,n,e,r){var o=[];t(n,function(t,n,r){e(t,function(e){e&&o.push({index:n,value:t}),r()})},function(){r(h(o.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})}function j(t,n,e,r){O(t,n,function(t,n){e(t,function(t){n(!t)})},r)}function P(t,n,e){return function(r,o,i,s){function u(){s&&s(e(!1,void 0))}function a(t,r,o){return s?void i(t,function(r){s&&n(r)&&(s(e(!0,t)),s=i=!1),o()}):o()}arguments.length>3?t(r,o,a,u):(s=i,i=o,t(r,a,u))}}function D(t,n){return n}function E(t,n,e){e=e||r;var o=c(n)?[]:{};t(n,function(t,n,e){t(g(function(t,r){r.length<=1&&(r=r[0]),o[n]=r,e(t)}))},function(t){e(t,o)})}function C(t,n,e,r){var o=[];t(n,function(t,n,r){e(t,function(t,n){o=o.concat(n||[]),r(t)})},function(t){r(t,o)})}function T(t,n,e){function o(t,n,e,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,R(n)||(n=[n]),0===n.length&&t.idle()?K.setImmediate(function(){t.drain()}):(l(n,function(n){var i={data:n,callback:o||r};e?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),void K.setImmediate(t.process))}function i(t,n){return function(){s-=1;var e=arguments;l(n,function(t){t.callback.apply(t,e)}),t.tasks.length+s===0&&t.drain(),t.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var s=0,a={tasks:[],concurrency:n,payload:e,saturated:r,empty:r,drain:r,started:!1,paused:!1,push:function(t,n){o(a,t,!1,n)},kill:function(){a.drain=r,a.tasks=[]},unshift:function(t,n){o(a,t,!0,n)},process:function(){if(!a.paused&&s<a.concurrency&&a.tasks.length)for(;s<a.concurrency&&a.tasks.length;){var n=a.payload?a.tasks.splice(0,a.payload):a.tasks.splice(0,a.tasks.length),e=h(n,function(t){return t.data});0===a.tasks.length&&a.empty(),s+=1;var r=u(i(a,n));t(e,r)}},length:function(){return a.tasks.length},running:function(){return s},idle:function(){return a.tasks.length+s===0},pause:function(){a.paused=!0},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=Math.min(a.concurrency,a.tasks.length),n=1;t>=n;n++)K.setImmediate(a.process)}}};return a}function I(t){return g(function(n,e){n.apply(null,e.concat([g(function(n,e){"object"==typeof console&&(n?console.error&&console.error(n):console[t]&&l(e,function(n){console[t](n)}))})]))})}function A(t){return function(n,e,r){t(p(n),e,r)}}function q(t){return g(function(n,e){var r=g(function(e){var r=this,o=e.pop();return t(n,function(t,n,o){t.apply(r,e.concat([o]))},o)});return e.length?r.apply(this,e):r})}function L(t){return g(function(n){var e=n.pop();n.push(function(){var t=arguments;r?K.setImmediate(function(){e.apply(null,t)}):e.apply(null,t)});var r=!0;t.apply(this,n),r=!1})}var U,K={},N="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this;null!=N&&(U=N.async),K.noConflict=function(){return N.async=U,K};var B=Object.prototype.toString,R=Array.isArray||function(t){return"[object Array]"===B.call(t)},F=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},M=Object.keys||function(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n},z="function"==typeof setImmediate&&setImmediate,W=z?function(t){z(t)}:function(t){setTimeout(t,0)};"object"==typeof t&&"function"==typeof t.nextTick?K.nextTick=t.nextTick:K.nextTick=W,K.setImmediate=z?W:K.nextTick,K.forEach=K.each=function(t,n,e){return K.eachOf(t,b(n),e)},K.forEachSeries=K.eachSeries=function(t,n,e){return K.eachOfSeries(t,b(n),e)},K.forEachLimit=K.eachLimit=function(t,n,e,r){return w(n)(t,b(e),r)},K.forEachOf=K.eachOf=function(t,n,e){function o(t){t?e(t):(s+=1,s>=i&&e(null))}e=a(e||r),t=t||[];var i=c(t)?t.length:M(t).length,s=0;return i?void f(t,function(e,r){n(t[r],r,u(o))}):e(null)},K.forEachOfSeries=K.eachOfSeries=function(t,n,e){function o(){var r=!0;return null===s?e(null):(n(t[s],s,u(function(t){if(t)e(t);else{if(s=i(),null===s)return e(null);r?K.nextTick(o):o()}})),void(r=!1))}e=a(e||r),t=t||[];var i=v(t),s=i();o()},K.forEachOfLimit=K.eachOfLimit=function(t,n,e,r){w(n)(t,e,r)},K.map=_(S),K.mapSeries=k(S),K.mapLimit=x(S),K.inject=K.foldl=K.reduce=function(t,n,e,r){K.eachOfSeries(t,function(t,r,o){e(n,t,function(t,e){n=e,o(t)})},function(t){r(t||null,n)})},K.foldr=K.reduceRight=function(t,n,e,r){var i=h(t,o).reverse();K.reduce(i,n,e,r)},K.select=K.filter=_(O),K.selectLimit=K.filterLimit=x(O),K.selectSeries=K.filterSeries=k(O),K.reject=_(j),K.rejectLimit=x(j),K.rejectSeries=k(j),K.any=K.some=P(K.eachOf,i,o),K.someLimit=P(K.eachOfLimit,i,o),K.all=K.every=P(K.eachOf,s,s),K.everyLimit=P(K.eachOfLimit,s,s),K.detect=P(K.eachOf,o,D),K.detectSeries=P(K.eachOfSeries,o,D),K.detectLimit=P(K.eachOfLimit,o,D),K.sortBy=function(t,n,e){function r(t,n){var e=t.criteria,r=n.criteria;return r>e?-1:e>r?1:0}K.map(t,function(t,e){n(t,function(n,r){n?e(n):e(null,{value:t,criteria:r})})},function(t,n){return t?e(t):void e(null,h(n.sort(r),function(t){return t.value}))})},K.auto=function(t,n){function e(t){f.unshift(t)}function o(t){var n=y(f,t);n>=0&&f.splice(n,1)}function i(){u--,l(f.slice(0),function(t){t()})}n=a(n||r);var s=M(t),u=s.length;if(!u)return n(null);var c={},f=[];e(function(){u||n(null,c)}),l(s,function(r){function s(){return d(h,function(t,n){return t&&c.hasOwnProperty(n)},!0)&&!c.hasOwnProperty(r)}function u(){s()&&(o(u),f[f.length-1](l,c))}for(var a,f=R(t[r])?t[r]:[t[r]],l=g(function(t,e){if(e.length<=1&&(e=e[0]),t){var o={};m(c,function(t,n){o[n]=t}),o[r]=e,n(t,o)}else c[r]=e,K.setImmediate(i)}),h=f.slice(0,f.length-1),p=h.length;p--;){if(!(a=t[h[p]]))throw new Error("Has inexistant dependency");if(R(a)&&y(a,r)>=0)throw new Error("Has cyclic dependencies")}s()?f[f.length-1](l,c):e(u)})},K.retry=function(t,n,e){function r(t,n){if("number"==typeof n)t.times=parseInt(n,10)||i;else{if("object"!=typeof n)throw new Error("Unsupported argument type for 'times': "+typeof n);t.times=parseInt(n.times,10)||i,t.interval=parseInt(n.interval,10)||s}}function o(t,n){function e(t,e){return function(r){t(function(t,n){r(!t||e,{err:t,result:n})},n)}}function r(t){return function(n){setTimeout(function(){n(null)},t)}}for(;a.times;){var o=!(a.times-=1);u.push(e(a.task,o)),!o&&a.interval>0&&u.push(r(a.interval))}K.series(u,function(n,e){e=e[e.length-1],(t||a.callback)(e.err,e.result)})}var i=5,s=0,u=[],a={times:i,interval:s},c=arguments.length;if(1>c||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=c&&"function"==typeof t&&(e=n,n=t),"function"!=typeof t&&r(a,t),a.callback=e,a.task=n,a.callback?o():o},K.waterfall=function(t,n){function e(t){return g(function(r,o){if(r)n.apply(null,[r].concat(o));else{var i=t.next();i?o.push(e(i)):o.push(n),L(t).apply(null,o)}})}if(n=a(n||r),!R(t)){var o=new Error("First argument to waterfall must be an array of functions");return n(o)}return t.length?void e(K.iterator(t))():n()},K.parallel=function(t,n){E(K.eachOf,t,n)},K.parallelLimit=function(t,n,e){E(w(n),t,e)},K.series=function(t,n){E(K.eachOfSeries,t,n)},K.iterator=function(t){function n(e){function r(){return t.length&&t[e].apply(null,arguments),r.next()}return r.next=function(){return e<t.length-1?n(e+1):null},r}return n(0)},K.apply=g(function(t,n){return g(function(e){return t.apply(null,n.concat(e))})}),K.concat=_(C),K.concatSeries=k(C),K.whilst=function(t,n,e){if(e=e||r,t()){var o=g(function(r,i){r?e(r):t.apply(this,i)?n(o):e(null)});n(o)}else e(null)},K.doWhilst=function(t,n,e){var r=0;return K.whilst(function(){return++r<=1||n.apply(this,arguments)},t,e)},K.until=function(t,n,e){return K.whilst(function(){return!t.apply(this,arguments)},n,e)},K.doUntil=function(t,n,e){return K.doWhilst(t,function(){return!n.apply(this,arguments)},e)},K.during=function(t,n,e){e=e||r;var o=g(function(n,r){n?e(n):(r.push(i),t.apply(this,r))}),i=function(t,r){t?e(t):r?n(o):e(null)};t(i)},K.doDuring=function(t,n,e){var r=0;K.during(function(t){r++<1?t(null,!0):n.apply(this,arguments)},t,e)},K.queue=function(t,n){var e=T(function(n,e){t(n[0],e)},n,1);return e},K.priorityQueue=function(t,n){function e(t,n){return t.priority-n.priority}function o(t,n,e){for(var r=-1,o=t.length-1;o>r;){var i=r+(o-r+1>>>1);e(n,t[i])>=0?r=i:o=i-1}return r}function i(t,n,i,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,R(n)||(n=[n]),0===n.length?K.setImmediate(function(){t.drain()}):void l(n,function(n){var u={data:n,priority:i,callback:"function"==typeof s?s:r};t.tasks.splice(o(t.tasks,u,e)+1,0,u),t.tasks.length===t.concurrency&&t.saturated(),K.setImmediate(t.process)})}var s=K.queue(t,n);return s.push=function(t,n,e){i(s,t,n,e)},delete s.unshift,s},K.cargo=function(t,n){return T(t,1,n)},K.log=I("log"),K.dir=I("dir"),K.memoize=function(t,n){var e={},r={};n=n||o;var i=g(function(o){var i=o.pop(),s=n.apply(null,o);s in e?K.nextTick(function(){i.apply(null,e[s])}):s in r?r[s].push(i):(r[s]=[i],t.apply(null,o.concat([g(function(t){e[s]=t;var n=r[s];delete r[s];for(var o=0,i=n.length;i>o;o++)n[o].apply(null,t)})])))});return i.memo=e,i.unmemoized=t,i},K.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},K.times=A(K.map),K.timesSeries=A(K.mapSeries),K.timesLimit=function(t,n,e,r){return K.mapLimit(p(t),n,e,r)},K.seq=function(){var t=arguments;return g(function(n){var e=this,o=n[n.length-1];"function"==typeof o?n.pop():o=r,K.reduce(t,n,function(t,n,r){n.apply(e,t.concat([g(function(t,n){r(t,n)})]))},function(t,n){o.apply(e,[t].concat(n))})})},K.compose=function(){return K.seq.apply(null,Array.prototype.reverse.call(arguments));
},K.applyEach=q(K.eachOf),K.applyEachSeries=q(K.eachOfSeries),K.forever=function(t,n){function e(t){return t?o(t):void i(e)}var o=u(n||r),i=L(t);e()},K.ensureAsync=L,K.constant=g(function(t){var n=[null].concat(t);return function(t){return t.apply(this,n)}}),K.wrapSync=K.asyncify=function(t){return g(function(n){var e,r=n.pop();try{e=t.apply(this,n)}catch(o){return r(o)}F(e)&&"function"==typeof e.then?e.then(function(t){r(null,t)})["catch"](function(t){r(t.message?t:new Error(t))}):r(null,e)})},"object"==typeof n&&n.exports?n.exports=K:"function"==typeof define&&define.amd?define([],function(){return K}):N.async=K}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],12:[function(t,n,e){arguments[4][11][0].apply(e,arguments)},{_process:1,dup:11}],13:[function(t,n,e){(function(t){(function(t,n,e){"use strict";function r(t,n){return"object"!=typeof n&&(n=n()),Object.keys(n).forEach(function(e){t[e]=n[e]}),t}function o(t){return{from:function(n){return t.prototype=Object.create(n.prototype),t.prototype.constructor=t,{extend:function(e){r(t.prototype,"object"!=typeof e?e(n.prototype):e)}}}}}function i(t,n){return n(t)}function s(t,n){function f(){jt.on("versionchange",function(t){jt.close(),jt.on("error").fire(new dt("Database version changed by other database connection."))})}function p(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function g(t,n,e,r){if(0===t){Object.keys(mt).forEach(function(t){D(n,t,mt[t].primKey,mt[t].indexes)});var o=jt._createTransaction(Ot,vt,mt);o.idbtrans=n,o.idbtrans.onerror=C(e,["populating database"]),o.on("error").subscribe(e),B.newPSD(function(){B.PSD.trans=o;try{jt.on("populate").fire(o)}catch(t){r.onerror=n.onerror=function(t){t.preventDefault()};try{n.abort()}catch(i){}n.db.close(),e(t)}})}else{var s=[],u=yt.filter(function(n){return n._cfg.version===t})[0];if(!u)throw new dt("Dexie specification of currently installed DB version is missing");mt=jt._dbSchema=u._cfg.dbschema;var a=!1,c=yt.filter(function(n){return n._cfg.version>t});c.forEach(function(t){var r=mt,o=t._cfg.dbschema;at(r,n),at(o,n),mt=jt._dbSchema=o;var u=w(r,o);u.add.forEach(function(t){s.push(function(n,e){D(n,t[0],t[1].primKey,t[1].indexes),e()})}),u.change.forEach(function(t){if(t.recreate)throw new dt("Not yet support for changing primary key");s.push(function(n,e){var r=n.objectStore(t.name);t.add.forEach(function(t){z(r,t)}),t.change.forEach(function(t){r.deleteIndex(t.name),z(r,t)}),t.del.forEach(function(t){r.deleteIndex(t)}),e()})}),t._cfg.contentUpgrade&&s.push(function(n,r){a=!0;var s=jt._createTransaction(Ot,[].slice.call(n.db.objectStoreNames,0),o);s.idbtrans=n;var u=0;s._promise=i(s._promise,function(t){return function(n,e,o){function i(t){return function(){t.apply(this,arguments),0===--u&&r()}}return++u,t.call(this,n,function(t,n,r){arguments[0]=i(t),arguments[1]=i(n),e.apply(this,arguments)},o)}}),n.onerror=C(e,["running upgrader function for version",t._cfg.version]),s.on("error").subscribe(e),t._cfg.contentUpgrade(s),0===u&&r()}),a&&st()||s.push(function(t,n){M(o,t),n()})});var f=function(){try{s.length?s.shift()(n,f):F(mt,n)}catch(t){r.onerror=n.onerror=function(t){t.preventDefault()};try{n.abort()}catch(o){}n.db.close(),e(t)}};f()}}function w(t,n){var e={del:[],add:[],change:[]};for(var r in t)n[r]||e.del.push(r);for(var r in n){var o=t[r],i=n[r];if(o){var s={name:r,def:n[r],recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)s.recreate=!0,e.change.push(s);else{var u=o.indexes.reduce(function(t,n){return t[n.name]=n,t},{}),a=i.indexes.reduce(function(t,n){return t[n.name]=n,t},{});for(var c in u)a[c]||s.del.push(c);for(var c in a){var f=u[c],l=a[c];f?f.src!==l.src&&s.change.push(l):s.add.push(l)}(s.recreate||s.del.length>0||s.add.length>0||s.change.length>0)&&e.change.push(s)}}else e.add.push([r,i])}return e}function D(t,n,e,r){var o=t.db.createObjectStore(n,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach(function(t){z(o,t)}),o}function F(t,n){Object.keys(t).forEach(function(e){n.db.objectStoreNames.contains(e)||D(n,e,t[e].primKey,t[e].indexes)})}function M(t,n){for(var r=0;r<n.db.objectStoreNames.length;++r){var o=n.db.objectStoreNames[r];(null===t[o]||t[o]===e)&&n.db.deleteObjectStore(o)}}function z(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function W(t,n){throw new dt("Table "+n[0]+" not part of transaction. Original Scope Function Source: "+s.Promise.PSD.trans.scopeFunc.toString())}function H(t,n,e,r){this.name=t,this.schema=e,this.hook=gt[t]?gt[t].hook:v(null,{creating:[l,u],reading:[c,a],updating:[h,u],deleting:[m,u]}),this._tpf=n,this._collClass=r||$}function J(t,n,e,r){H.call(this,t,n,e,r||G)}function V(t,n,e,r){function o(t,n,e,r){return i._promise(t,e,r)}var i=this;this.db=jt,this.mode=t,this.storeNames=n,this.idbtrans=null,this.on=v(this,["complete","error"],"abort"),this._reculock=0,this._blockedFuncs=[],this._psd=null,this.active=!0,this._dbschema=e,r&&(this.parent=r),this._tpf=o,this.tables=Object.create(bt);for(var s=n.length-1;-1!==s;--s){var u=n[s],a=jt._tableFactory(t,e[u],o);this.tables[u]=a,this[u]||(this[u]=a)}}function Z(t,n,e){this._ctx={table:t,index:":id"===n?null:n,collClass:t._collClass,or:e}}function $(t,n){var e=null,r=null;if(n)try{e=n()}catch(o){r=o}var i=t._ctx;this._ctx={table:i.table,index:i.index,isPrimKey:!i.index||i.table.schema.primKey.keyPath&&i.index===i.table.schema.primKey.name,range:e,op:"openCursor",dir:"next",unique:"",algorithm:null,filter:null,isMatch:null,offset:0,limit:1/0,error:r,or:i.or}}function G(){$.apply(this,arguments)}function Y(t,n){return t._cfg.version-n._cfg.version}function Q(t,n,e,r,o,i){e.forEach(function(e){var s=jt._tableFactory(r,o[e],n);t.forEach(function(t){t[e]||(i?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var t=B.PSD&&B.PSD.trans;return t&&t.db===jt?t.tables[e]:s}}):t[e]=s)})})}function X(t){t.forEach(function(t){for(var n in t)t[n]instanceof H&&delete t[n]})}function tt(t,n,e,r,o,i){var s=B.PSD;i=i||a,t.onerror||(t.onerror=C(o)),n?t.onsuccess=_(function(s){var u=t.result;if(u){var a=function(){u["continue"]()};n(u,function(t){a=t},r,o)&&e(i(u.value),u,function(t){a=t}),a()}else r()},o,s):t.onsuccess=_(function(n){var o=t.result;if(o){var s=function(){o["continue"]()};e(i(o.value),o,function(t){s=t}),s()}else r()},o,s)}function nt(t){var n=[];return t.split(",").forEach(function(t){t=t.trim();var e=t.replace("&","").replace("++","").replace("*",""),r=0!==e.indexOf("[")?e:t.substring(t.indexOf("[")+1,t.indexOf("]")).split("+");n.push(new q(e,r||null,-1!==t.indexOf("&"),-1!==t.indexOf("*"),-1!==t.indexOf("++"),Array.isArray(r),-1!==r.indexOf(".")))}),n}function et(t,n){return n>t?-1:t>n?1:0}function rt(t,n){return n>t?1:t>n?-1:0}function ot(t){return function(n,e){for(var r=0;;){var o=t(n[r],e[r]);if(0!==o)return o;if(++r,r===n.length||r===e.length)return t(n.length,e.length)}}}function it(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}function st(){return navigator.userAgent.indexOf("Trident")>=0||navigator.userAgent.indexOf("MSIE")>=0}function ut(){if(jt.verno=wt.version/10,jt._dbSchema=mt={},vt=[].slice.call(wt.objectStoreNames,0),0!==vt.length){var t=wt.transaction(K(vt),"readonly");vt.forEach(function(n){for(var e=t.objectStore(n),r=e.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new q(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,o),s=[],u=0;u<e.indexNames.length;++u){var a=e.index(e.indexNames[u]);r=a.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new q(a.name,r,!!a.unique,!!a.multiEntry,!1,r&&"string"!=typeof r,o);s.push(c)}mt[n]=new L(n,i,s,{})}),Q([gt],jt._transPromiseFactory,Object.keys(mt),Ot,mt)}}function at(t,n){for(var e=n.db.objectStoreNames,r=0;r<e.length;++r)for(var o=e[r],i=n.objectStore(o),s=0;s<i.indexNames.length;++s){var u=i.indexNames[s],a=i.index(u).keyPath,c="string"==typeof a?a:"["+[].slice.call(a).join("+")+"]";if(t[o]){var f=t[o].idxByName[c];f&&(f.name=u)}}}var ct=n&&n.addons||s.addons,ft=s.dependencies,lt=ft.indexedDB,ht=ft.IDBKeyRange,pt=(ft.IDBTransaction,ft.DOMError,ft.TypeError),dt=ft.Error,mt=this._dbSchema={},yt=[],vt=[],gt={},bt={},wt=null,_t=!0,xt=null,kt=!1,St="readonly",Ot="readwrite",jt=this,Pt=[],Dt=!1,Et=!!N();this.version=function(t){if(wt)throw new dt("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=yt.filter(function(n){return n._cfg.version===t})[0];return n?n:(n=new p(t),yt.push(n),yt.sort(Y),n)},r(p.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,t):t;var n={};yt.forEach(function(t){r(n,t._cfg.storesSource)});var e=this._cfg.dbschema={};return this._parseStoresSpec(n,e),mt=jt._dbSchema=e,X([gt,jt,bt]),Q([bt],W,Object.keys(e),Ot,e),Q([gt,jt,this._cfg.tables],jt._transPromiseFactory,Object.keys(e),Ot,e,!0),vt=Object.keys(e),this},upgrade:function(t){var n=this;return R(function(){t(jt._createTransaction(Ot,Object.keys(n._cfg.dbschema),n._cfg.dbschema))}),this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,n){Object.keys(t).forEach(function(e){if(null!==t[e]){var r={},o=nt(t[e]),i=o.shift();if(i.multi)throw new dt("Primary key cannot be multi-valued");i.keyPath&&i.auto&&k(r,i.keyPath,0),o.forEach(function(t){if(t.auto)throw new dt("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new dt("Index must have a name and cannot be an empty string");k(r,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),n[e]=new L(e,i,o,r)}})}}),this._allTables=gt,this._tableFactory=function(t,n,e){return t===St?new H(n.name,e,n,$):new J(n.name,e,n)},this._createTransaction=function(t,n,e,r){return new V(t,n,e,r)},this._transPromiseFactory=function(t,n,e){if(!_t||B.PSD&&B.PSD.letThrough){var r=jt._createTransaction(t,n,mt);return r._promise(t,function(t,n){r.error(function(t){jt.on("error").fire(t)}),e(function(n){r.complete(function(){t(n)})},n,r)})}var o=new B(function(r,i){Pt.push({resume:function(){var s=jt._transPromiseFactory(t,n,e);o.onuncatched=s.onuncatched,s.then(r,i)}})});return o},this._whenReady=function(t){return new B(!_t||B.PSD&&B.PSD.letThrough?t:function(n,e){R(function(){new B(function(){t(n,e)})}),Pt.push({resume:function(){t(n,e)}})})},this.verno=0,this.open=function(){return new B(function(n,e){function r(t){try{o.transaction.abort()}catch(n){}kt=!1,xt=t,_t=!1,e(xt),Pt.forEach(function(t){t.resume()}),Pt=[]}if(wt||kt)throw new dt("Database already opened or being opened");var o,i=!1;try{if(xt=null,kt=!0,0===yt.length&&(Dt=!0),!lt)throw new dt("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using Safari, make sure to include indexedDB polyfill.");o=Dt?lt.open(t):lt.open(t,Math.round(10*jt.verno)),o.onerror=C(r,["opening database",t]),o.onblocked=function(t){jt.on("blocked").fire(t)},o.onupgradeneeded=_(function(n){if(Dt&&!jt._allowEmptyDB){o.onerror=function(t){t.preventDefault()},o.transaction.abort(),o.result.close();var e=lt.deleteDatabase(t);e.onsuccess=e.onerror=function(){r(new dt("Database '"+t+"' doesnt exist"))}}else{0===n.oldVersion&&(i=!0),o.transaction.onerror=C(r);var s=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;g(s/10,o.transaction,r,o)}},r),o.onsuccess=_(function(e){kt=!1,wt=o.result,Dt?ut():wt.objectStoreNames.length>0&&at(mt,wt.transaction(K(wt.objectStoreNames),St)),wt.onversionchange=jt.on("versionchange").fire,Et||A(function(n){return-1===n.indexOf(t)?n.push(t):void 0}),B.newPSD(function(){function t(){_t=!1,Pt.forEach(function(t){t.resume()}),Pt=[],n()}B.PSD.letThrough=!0;try{var e=jt.on.ready.fire();e&&"function"==typeof e.then?e.then(t,function(t){wt.close(),wt=null,r(t)}):b(t)}catch(o){r(o)}})},r)}catch(s){r(s)}})},this.close=function(){wt&&(wt.close(),wt=null,_t=!0,xt=null)},this["delete"]=function(){var n=arguments;return new B(function(e,r){function o(){jt.close();var n=lt.deleteDatabase(t);n.onsuccess=function(){Et||A(function(n){var e=n.indexOf(t);return e>=0?n.splice(e,1):void 0}),e()},n.onerror=C(r,["deleting",t]),n.onblocked=function(){jt.on("blocked").fire()}}if(n.length>0)throw new dt("Arguments not allowed in db.delete()");kt?Pt.push({resume:o}):o()})},this.backendDB=function(){return wt},this.isOpen=function(){return null!==wt},this.hasFailed=function(){return null!==xt},this.dynamicallyOpened=function(){return Dt},this.name=t,Object.defineProperty(this,"tables",{get:function(){return Object.keys(gt).map(function(t){return gt[t]})}}),this.on=v(this,"error","populate","blocked",{ready:[y,u],versionchange:[d,u]}),this.on.ready.subscribe=i(this.on.ready.subscribe,function(t){return function(n,e){function r(){return e||jt.on.ready.unsubscribe(r),n.apply(this,arguments)}t.call(this,r),jt.isOpen()&&(_t?Pt.push({resume:r}):r())}}),R(function(){jt.on("populate").fire(jt._createTransaction(Ot,vt,mt)),jt.on("error").fire(new dt)}),this.transaction=function(t,n,e){function r(n,r){var s=null;try{if(a)throw a;s=jt._createTransaction(t,c,mt,o);var u=c.map(function(t){return s.tables[t]});u.push(s);var f,l=0;B.newPSD(function(){B.PSD.trans=s,s.scopeFunc=e,o&&(s.idbtrans=o.idbtrans,s._promise=i(s._promise,function(t){return function(n,e,r){function o(t){return function(n){var e;return B._rootExec(function(){e=t(n),B._tickFinalize(function(){0===--l&&s.active&&(s.active=!1,s.on.complete.fire())})}),e}}return++l,t.call(this,n,function(t,n,r){return e(o(t),o(n),r)},r)}})),s.complete(function(){n(f)}),s.error(function(t){s.idbtrans&&(s.idbtrans.onerror=I);try{s.abort()}catch(n){}o&&(o.active=!1,o.on.error.fire(t));var e=r(t);o||e||jt.on.error.fire(t)}),B._rootExec(function(){f=e.apply(s,u)})}),(!s.idbtrans||o&&0===l)&&s._nop()}catch(h){s&&s.idbtrans&&(s.idbtrans.onerror=I),s&&s.abort(),o&&o.on.error.fire(h),b(function(){r(h)||jt.on("error").fire(h)})}}n=[].slice.call(arguments,1,arguments.length-1),e=arguments[arguments.length-1];var o=B.PSD&&B.PSD.trans;o&&o.db===jt&&-1===t.indexOf("!")||(o=null);var s=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");var u=Array.isArray(n[0])?n.reduce(function(t,n){return t.concat(n)}):n,a=null,c=u.map(function(t){return"string"==typeof t?t:(t instanceof H||(a=a||new pt("Invalid type. Arguments following mode must be instances of Table or String")),t.name)});return"r"==t||t==St?t=St:"rw"==t||t==Ot?t=Ot:a=new dt("Invalid transaction mode: "+t),o&&(a||(o&&o.mode===St&&t===Ot&&(s?o=null:a=a||new dt("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")),o&&c.forEach(function(t){o.tables.hasOwnProperty(t)||(s?o=null:a=a||new dt("Table "+t+" not included in parent transaction. Parent Transaction function: "+o.scopeFunc.toString()))}))),o?o._promise(t,r,"lock"):jt._whenReady(r)},this.table=function(t){if(!Dt&&!gt.hasOwnProperty(t))throw new dt("Table does not exist");return gt[t]},r(H.prototype,function(){function t(){throw new dt("Current Transaction is READONLY")}return{_trans:function(t,n,e){return this._tpf(t,[this.name],n,e)},_idbstore:function(t,n,e){var r=this;return this._tpf(t,[this.name],function(t,e,o){n(t,e,o.idbtrans.objectStore(r.name),o)},e)},get:function(t,n){var e=this;return R(function(){n(e.schema.instanceTemplate)}),this._idbstore(St,function(n,r,o){var i=o.get(t);i.onerror=C(r,["getting",t,"from",e.name]),i.onsuccess=function(){n(e.hook.reading.fire(i.result))}}).then(n)},where:function(t){return new Z(this,t)},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){var n=this;return R(function(){t(n.schema.instanceTemplate)}),this._idbstore(St,function(e,r,o){var i=o.openCursor();i.onerror=C(r,["calling","Table.each()","on",n.name]),tt(i,null,t,e,r,n.hook.reading.fire)})},toArray:function(t){var n=this;return R(function(){t([n.schema.instanceTemplate])}),this._idbstore(St,function(t,e,r){var o=[],i=r.openCursor();i.onerror=C(e,["calling","Table.toArray()","on",n.name]),tt(i,null,function(t){o.push(t)},function(){t(o)},e,n.hook.reading.fire)}).then(t)},orderBy:function(t){return new this._collClass(new Z(this,t))},toCollection:function(){return new this._collClass(new Z(this))},mapToClass:function(t,n){this.schema.mappedClass=t;var e=Object.create(t.prototype);this.schema.primKey.keyPath&&(k(e,this.schema.primKey.keyPath,this.schema.primKey.auto?0:""),S(t.prototype,this.schema.primKey.keyPath)),n&&E(e,n),this.schema.instanceTemplate=e;var r=Object.setPrototypeOf?function(n){return n?(Object.setPrototypeOf(n,t.prototype),n):n}:function(n){if(!n)return n;var e=Object.create(t.prototype);for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(s.defineClass(t),t)},add:t,put:t,"delete":t,clear:t,update:t}}),o(J).from(H).extend(function(){return{add:function(t,n){var r=this,o=this.hook.creating.fire;return this._idbstore(Ot,function(i,s,a,c){var f={};if(o!==u){var l=n||(a.keyPath?x(t,a.keyPath):e),h=o.call(f,l,t,c);l===e&&h!==e&&(a.keyPath?k(t,a.keyPath,h):n=h)}var p=n?a.add(t,n):a.add(t);p.onerror=C(function(t){return f.onerror&&f.onerror(t),s(t)},["adding",t,"into",r.name]),p.onsuccess=function(n){var e=a.keyPath;e&&k(t,e,n.target.result),f.onsuccess&&f.onsuccess(n.target.result),i(p.result)}})},put:function(t,n){var r=this,o=this.hook.creating.fire,i=this.hook.updating.fire;return o!==u||i!==u?this._trans(Ot,function(o,i,s){var u=n||r.schema.primKey.keyPath&&x(t,r.schema.primKey.keyPath);u===e?s.tables[r.name].add(t).then(o,i):(s._lock(),t=j(t),s.tables[r.name].where(":id").equals(u).modify(function(n){this.value=t}).then(function(e){return 0===e?s.tables[r.name].add(t,n):u})["finally"](function(){s._unlock()}).then(o,i))}):this._idbstore(Ot,function(e,o,i){var s=n?i.put(t,n):i.put(t);s.onerror=C(o,["putting",t,"into",r.name]),s.onsuccess=function(n){var r=i.keyPath;r&&k(t,r,n.target.result),e(s.result)}})},"delete":function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t)["delete"]():this._idbstore(Ot,function(n,e,r){var o=r["delete"](t);o.onerror=C(e,["deleting",t,"from",r.name]),o.onsuccess=function(t){n(o.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection()["delete"]():this._idbstore(Ot,function(t,n,e){var r=e.clear();r.onerror=C(n,["clearing",e.name]),r.onsuccess=function(n){t(r.result)}})},update:function(t,n){if("object"!=typeof n||Array.isArray(n))throw new dt("db.update(keyOrObject, modifications). modifications must be an object.");if("object"!=typeof t||Array.isArray(t))return this.where(":id").equals(t).modify(n);Object.keys(n).forEach(function(e){k(t,e,n[e])});var r=x(t,this.schema.primKey.keyPath);return r===e&&B.reject(new dt("Object does not contain its primary key")),this.where(":id").equals(r).modify(n)}}}),r(V.prototype,{_lock:function(){return++this._reculock,1===this._reculock&&B.PSD&&(B.PSD.lockOwnerFor=this),this},_unlock:function(){if(0===--this._reculock)for(B.PSD&&(B.PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{t()}catch(n){}}return this},_locked:function(){return this._reculock&&(!B.PSD||B.PSD.lockOwnerFor!==this)},_nop:function(t){this.tables[this.storeNames[0]].get(0).then(t)},_promise:function(t,n,e){var r=this;return B.newPSD(function(){var o;return r._locked()?o=new B(function(o,i){r._blockedFuncs.push(function(){r._promise(t,n,e).then(o,i)})}):(o=r.active?new B(function(o,i){if(!r.idbtrans&&t){if(!wt)throw new dt(xt?"Database not open. Following error in populate, ready or upgrade function made Dexie.open() fail: "+xt:"Database not open");var u=r.idbtrans=wt.transaction(K(r.storeNames),r.mode);u.onerror=function(t){r.on("error").fire(t&&t.target.error),t.preventDefault(),r.abort()},u.onabort=function(t){r.active=!1,r.on("abort").fire(t)},u.oncomplete=function(t){r.active=!1,r.on("complete").fire(t)}}e&&r._lock();try{n(o,i,r)}catch(a){s.ignoreTransaction(function(){r.on("error").fire(a)}),r.abort(),i(a)}}):B.reject(T(new dt("Transaction is inactive. Original Scope Function Source: "+r.scopeFunc.toString()))),r.active&&e&&o["finally"](function(){r._unlock()})),o.onuncatched=function(t){s.ignoreTransaction(function(){r.on("error").fire(t)}),r.abort()},o})},complete:function(t){return this.on("complete",t)},error:function(t){return this.on("error",t)},abort:function(){if(this.idbtrans&&this.active)try{this.active=!1,this.idbtrans.abort(),this.on.error.fire(new dt("Transaction Aborted"))}catch(t){}},table:function(t){if(!this.tables.hasOwnProperty(t))throw new dt("Table "+t+" not in transaction");return this.tables[t]}}),r(Z.prototype,function(){function t(t,n){try{throw n}catch(e){t._ctx.error=e}return t}function n(t){return Array.prototype.slice.call(1===t.length&&Array.isArray(t[0])?t[0]:t)}function e(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function r(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function o(t,n,e,r,o,i){for(var s=Math.min(t.length,r.length),u=-1,a=0;s>a;++a){var c=n[a];if(c!==r[a])return o(t[a],e[a])<0?t.substr(0,a)+e[a]+e.substr(a+1):o(t[a],r[a])<0?t.substr(0,a)+r[a]+e.substr(a+1):u>=0?t.substr(0,u)+n[u]+e.substr(u+1):null;o(t[a],c)<0&&(u=a)}return s<r.length&&"next"===i?t+e.substr(t.length):s<t.length&&"prev"===i?t.substr(0,e.length):0>u?null:t.substr(0,u)+r[u]+e.substr(u+1)}function i(t,n,i){function s(t){u=e(t),a=r(t),c="next"===t?et:rt,f=u(i),l=a(i),h=t}var u,a,c,f,l,h;s("next"),t._ondirectionchange=function(t){s(t)},t._addAlgorithm(function(t,e,r){var i=t.key;if("string"!=typeof i)return!1;var s=a(i);if(n(s,l))return e(function(){t["continue"]()}),!0;var u=o(i,s,f,l,c,h);return e(u?function(){t["continue"](u)}:r),!1})}return{between:function(t,n,e,r){return e=e!==!1,r=r===!0,t>n||t===n&&(e||r)&&(!e||!r)?new this._ctx.collClass(this,function(){return ht.only(t)}).limit(0):new this._ctx.collClass(this,function(){return ht.bound(t,n,!e,!r)})},equals:function(t){return new this._ctx.collClass(this,function(){return ht.only(t)})},above:function(t){return new this._ctx.collClass(this,function(){return ht.lowerBound(t,!0)})},aboveOrEqual:function(t){return new this._ctx.collClass(this,function(){return ht.lowerBound(t)})},below:function(t){return new this._ctx.collClass(this,function(){return ht.upperBound(t,!0)})},belowOrEqual:function(t){return new this._ctx.collClass(this,function(){return ht.upperBound(t)})},startsWith:function(n){return"string"!=typeof n?t(new this._ctx.collClass(this),new pt("String expected")):this.between(n,n+String.fromCharCode(65535),!0,!0)},startsWithIgnoreCase:function(n){if("string"!=typeof n)return t(new this._ctx.collClass(this),new pt("String expected"));if(""===n)return this.startsWith(n);var e=new this._ctx.collClass(this,function(){return ht.bound(n.toUpperCase(),n.toLowerCase()+String.fromCharCode(65535))});return i(e,function(t,n){return 0===t.indexOf(n)},n),e._ondirectionchange=function(){t(e,new dt("reverse() not supported with WhereClause.startsWithIgnoreCase()"))},e},equalsIgnoreCase:function(n){if("string"!=typeof n)return t(new this._ctx.collClass(this),new pt("String expected"));var e=new this._ctx.collClass(this,function(){return ht.bound(n.toUpperCase(),n.toLowerCase())});return i(e,function(t,n){return t===n},n),e},anyOf:function(t){var e=this._ctx,r=e.table.schema,o=e.index?r.idxByName[e.index]:r.primKey,i=o&&o.compound,s=n(arguments),u=i?ot(et):et;if(s.sort(u),0===s.length)return new this._ctx.collClass(this,function(){return ht.only("")}).limit(0);var a=new this._ctx.collClass(this,function(){return ht.bound(s[0],s[s.length-1])});a._ondirectionchange=function(t){u="next"===t?et:rt,i&&(u=ot(u)),s.sort(u)};var c=0;return a._addAlgorithm(function(t,n,e){for(var r=t.key;u(r,s[c])>0;)if(++c,c===s.length)return n(e),!1;return 0===u(r,s[c])?(n(function(){t["continue"]()}),!0):(n(function(){t["continue"](s[c])}),!1)}),a}}}),r($.prototype,function(){function t(t,n){t.filter=it(t.filter,n)}function n(t,n){t.isMatch=it(t.isMatch,n)}function e(t,n){if(t.isPrimKey)return n;var e=t.table.schema.idxByName[t.index];if(!e)throw new dt("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return t.isPrimKey?n:n.index(e.name)}function r(t,n){return e(t,n)[t.op](t.range||null,t.dir+t.unique)}function o(t,n,e,o,i){t.or?!function(){function s(){2===++f&&e()}function u(t,e,r){if(!a||a(e,r,s,o)){var i=e.primaryKey.toString();c.hasOwnProperty(i)||(c[i]=!0,n(t,e,r))}}var a=t.filter,c={},f=(t.table.schema.primKey.keyPath,0);t.or._iterate(u,s,o,i),tt(r(t,i),t.algorithm,u,s,o,t.table.hook.reading.fire)}():tt(r(t,i),it(t.algorithm,t.filter),n,e,o,t.table.hook.reading.fire)}function i(t){return t.table.schema.instanceTemplate}return{_read:function(t,n){var e=this._ctx;return e.error?e.table._trans(null,function(t,n){n(e.error)}):e.table._idbstore(St,t).then(n)},_write:function(t){var n=this._ctx;return n.error?n.table._trans(null,function(t,e){e(n.error)}):n.table._idbstore(Ot,t,"locked")},_addAlgorithm:function(t){var n=this._ctx;n.algorithm=it(n.algorithm,t)},_iterate:function(t,n,e,r){return o(this._ctx,t,n,e,r)},each:function(t){var n=this._ctx;return R(function(){t(i(n))}),this._read(function(e,r,i){o(n,t,e,r,i)})},count:function(t){R(function(){t(0)});var n=this,r=this._ctx;if(r.filter||r.algorithm||r.or){var i=0;return this._read(function(t,n,e){o(r,function(){return++i,!1},function(){t(i)},n,e)},t)}return this._read(function(t,o,i){var s=e(r,i),u=r.range?s.count(r.range):s.count();u.onerror=C(o,["calling","count()","on",n.name]),u.onsuccess=function(n){t(Math.min(n.target.result,Math.max(0,r.limit-r.offset)))}},t)},sortBy:function(t,n){function e(t,n){return n?e(t[s[n]],n-1):t[u]}function r(t,n){var r=e(t,a),o=e(n,a);return o>r?-c:r>o?c:0}var o=this._ctx;R(function(){n([i(o)])});var s=t.split(".").reverse(),u=s[0],a=s.length-1,c="next"===this._ctx.dir?1:-1;return this.toArray(function(t){return t.sort(r)}).then(n)},toArray:function(t){var n=this._ctx;return R(function(){t([i(n)])}),this._read(function(t,e,r){var i=[];o(n,function(t){i.push(t)},function(){t(i)},e,r)},t)},offset:function(n){var e=this._ctx;return 0>=n?this:(e.offset+=n,e.or||e.algorithm||e.filter?t(e,function(t,e,r){return--n<0}):t(e,function(t,e,r){return 0===n?!0:1===n?(--n,!1):(e(function(){t.advance(n),n=0}),!1)}),this)},limit:function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),t(this._ctx,function(t,e,r){return--n<=0&&e(r),n>=0}),this},until:function(n,e){var r=this._ctx;return R(function(){n(i(r))}),t(this._ctx,function(t,r,o){return n(t.value)?(r(o),e):!0}),this},first:function(t){var n=this;return R(function(){t(i(n._ctx))}),this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},and:function(e){var r=this;return R(function(){e(i(r._ctx))}),t(this._ctx,function(t){return e(t.value)}),n(this._ctx,e),this},or:function(t){return new Z(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var n=this,e=this._ctx;return R(function(){t(i(n._ctx)[n._ctx.index])}),e.isPrimKey||(e.op="openKeyCursor"),this.each(function(n,e){t(e.key,e)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},keys:function(t){R(function(){t([i(e)[n._ctx.index]])});var n=this,e=this._ctx;e.isPrimKey||(e.op="openKeyCursor");var r=[];return this.each(function(t,n){r.push(n.key)}).then(function(){return r}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var n={};return t(this._ctx,function(t){var e=t.primaryKey.toString(),r=n.hasOwnProperty(e);return n[e]=!0,!r}),this}}}),o(G).from($).extend({modify:function(t){var n=this,e=this._ctx,o=e.table.hook,i=o.updating.fire,s=o.deleting.fire;return R(function(){"function"==typeof t&&t.call({value:e.table.schema.instanceTemplate},e.table.schema.instanceTemplate)}),this._write(function(o,a,c,f){function l(t,n,r){D=n.primaryKey;var o={primKey:n.primaryKey,value:t};if(d.call(o,t)!==!1){var i=!o.hasOwnProperty("value"),s=i?n["delete"]():n.update(o.value);++g,s.onerror=C(function(t){return _.push(t),S.push(o.primKey),o.onerror&&o.onerror(t),p(),!0},i?["deleting",t,"from",e.table.name]:["modifying",t,"on",e.table.name]),s.onsuccess=function(t){o.onsuccess&&o.onsuccess(o.value),++b,p()}}else o.onsuccess&&o.onsuccess(o.value)}function h(t){return t&&(_.push(t),S.push(D)),a(new U("Error modifying one or more objects",_,b,S))}function p(){w&&b+_.length===g&&(_.length>0?h():o(b))}var d;if("function"==typeof t)d=i===u&&s===u?t:function(n){var e=j(n);if(t.call(this,n)===!1)return!1;if(this.hasOwnProperty("value")){var r=P(e,this.value),o=i.call(this,r,this.primKey,e,f);o&&(n=this.value,Object.keys(o).forEach(function(t){k(n,t,o[t])}))}else s.call(this,this.primKey,n,f)};else if(i===u){var m=Object.keys(t),y=m.length;d=function(n){for(var e=!1,r=0;y>r;++r){var o=m[r],i=t[o];x(n,o)!==i&&(k(n,o,i),e=!0)}return e}}else{var v=t;t=O(v),d=function(n){var e=!1,o=i.call(this,t,this.primKey,j(n),f);return o&&r(t,o),Object.keys(t).forEach(function(r){var o=t[r];x(n,r)!==o&&(k(n,r,o),e=!0)}),o&&(t=O(v)),e}}var g=0,b=0,w=!1,_=[],S=[],D=null;n._iterate(l,function(){w=!0,p()},h,c)})},"delete":function(){return this.modify(function(){delete this.value})}}),r(this,{Collection:$,Table:H,Transaction:V,Version:p,WhereClause:Z,WriteableCollection:G,WriteableTable:J}),f(),ct.forEach(function(t){t(jt)})}function u(){}function a(t){return t}function c(t,n){return t===a?n:function(e){return n(t(e))}}function f(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function l(t,n){return t===u?n:function(){var r=t.apply(this,arguments);r!==e&&(arguments[0]=r);var o=this.onsuccess,i=this.onerror;delete this.onsuccess,delete this.onerror;var s=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?f(o,this.onsuccess):o),i&&(this.onerror=this.onerror?f(i,this.onerror):i),s!==e?s:r}}function h(t,n){return t===u?n:function(){var o=t.apply(this,arguments);o!==e&&r(arguments[0],o);var i=this.onsuccess,s=this.onerror;delete this.onsuccess,delete this.onerror;var u=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?f(i,this.onsuccess):i),s&&(this.onerror=this.onerror?f(s,this.onerror):s),o===e?u===e?e:u:u===e?o:r(o,u)}}function p(t,n){return t===u?n:function(){return t.apply(this,arguments)===!1?!1:n.apply(this,arguments)}}function d(t,n){return t===u?n:function(){return n.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function m(t,n){return t===u?n:function(){t.apply(this,arguments),n.apply(this,arguments)}}function y(t,n){return t===u?n:function(){var e=t.apply(this,arguments);if(e&&"function"==typeof e.then){var r=this,o=arguments;return e.then(function(){return n.apply(r,o)})}return n.apply(this,arguments)}}function v(n,e){function r(t,n,e){if(Array.isArray(t))return i(t);if("object"==typeof t)return o(t);n||(n=p),e||(e=u);var r={subscribers:[],fire:e,subscribe:function(t){r.subscribers.push(t),r.fire=n(r.fire,t)},unsubscribe:function(t){r.subscribers=r.subscribers.filter(function(n){return n!==t}),r.fire=r.subscribers.reduce(n,e)}};return a[t]=c[t]=r,r}function o(n){Object.keys(n).forEach(function(e){var o=n[e];if(Array.isArray(o))r(e,n[e][0],n[e][1]);else{if("asap"!==o)throw new Error("Invalid event config");
var i=r(e,null,function(){var n=arguments;i.subscribers.forEach(function(e){b(function(){e.apply(t,n)})})});i.subscribe=function(t){-1===i.subscribers.indexOf(t)&&i.subscribers.push(t)},i.unsubscribe=function(t){var n=i.subscribers.indexOf(t);-1!==n&&i.subscribers.splice(n,1)}}})}function i(t){function n(){return e?!1:void(e=!0)}var e=!1;t.forEach(function(t){r(t).subscribe(n)})}var s=arguments,a={},c=function(t,e){if(e){var r=[].slice.call(arguments,1),o=a[t];return o.subscribe.apply(o,r),n}return"string"==typeof t?a[t]:void 0};c.addEventType=r;for(var f=1,l=s.length;l>f;++f)r(s[f]);return c}function g(t){if(!t)throw new Error("Assertion failed")}function b(n){t.setImmediate?setImmediate(n):setTimeout(n,0)}function w(t){var n=setTimeout(t,1e3);clearTimeout(n)}function _(t,n,e){return function(){var r=B.PSD;B.PSD=e;try{t.apply(this,arguments)}catch(o){n(o)}finally{B.PSD=r}}}function x(t,n){if(t.hasOwnProperty(n))return t[n];if(!n)return t;if("string"!=typeof n){for(var r=[],o=0,i=n.length;i>o;++o){var s=x(t,n[o]);r.push(s)}return r}var u=n.indexOf(".");if(-1!==u){var a=t[n.substr(0,u)];return a===e?e:x(a,n.substr(u+1))}return e}function k(t,n,r){if(t&&n!==e)if("string"!=typeof n&&"length"in n){g("string"!=typeof r&&"length"in r);for(var o=0,i=n.length;i>o;++o)k(t,n[o],r[o])}else{var s=n.indexOf(".");if(-1!==s){var u=n.substr(0,s),a=n.substr(s+1);if(""===a)r===e?delete t[u]:t[u]=r;else{var c=t[u];c||(c=t[u]={}),k(c,a,r)}}else r===e?delete t[n]:t[n]=r}}function S(t,n){k(t,n,e)}function O(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function j(t){if(!t||"object"!=typeof t)return t;var n;if(Array.isArray(t)){n=[];for(var e=0,r=t.length;r>e;++e)n.push(j(t[e]))}else if(t instanceof Date)n=new Date,n.setTime(t.getTime());else{n=t.constructor?Object.create(t.constructor.prototype):{};for(var o in t)t.hasOwnProperty(o)&&(n[o]=j(t[o]))}return n}function P(t,n){var r={};for(var o in t)t.hasOwnProperty(o)&&(n.hasOwnProperty(o)?t[o]!==n[o]&&JSON.stringify(t[o])!=JSON.stringify(n[o])&&(r[o]=n[o]):r[o]=e);for(var o in n)n.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(r[o]=n[o]);return r}function D(t){if("function"==typeof t)return new t;if(Array.isArray(t))return[D(t[0])];if(t&&"object"==typeof t){var n={};return E(n,t),n}return t}function E(t,n){Object.keys(n).forEach(function(e){var r=D(n[e]);t[e]=r})}function C(t,n){return function(e){var r=e&&e.target.error||new Error;if(n){var o=" occurred when "+n.map(function(t){switch(typeof t){case"function":return t();case"string":return t;default:return JSON.stringify(t)}}).join(" ");r.name?r.toString=function(){return r.name+o+(r.message?". "+r.message:"")}:r+=o}return t(r),e&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()),!1}}function T(t){try{throw t}catch(n){return n}}function I(t){t.preventDefault()}function A(t){var n,e=s.dependencies.localStorage;if(!e)return t([]);try{n=JSON.parse(e.getItem("Dexie.DatabaseNames")||"[]")}catch(r){n=[]}t(n)&&e.setItem("Dexie.DatabaseNames",JSON.stringify(n))}function q(t,n,e,r,o,i,s){this.name=t,this.keyPath=n,this.unique=e,this.multi=r,this.auto=o,this.compound=i,this.dotted=s;var u="string"==typeof n?n:n&&"["+[].join.call(n,"+")+"]";this.src=(e?"&":"")+(r?"*":"")+(o?"++":"")+u}function L(t,n,e,r){this.name=t,this.primKey=n||new q,this.indexes=e||[new q],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=e.reduce(function(t,n){return t[n.name]=n,t},{})}function U(t,n,e,r){this.name="ModifyError",this.failures=n,this.failedKeys=r,this.successCount=e,this.message=n.join("\n")}function K(t){return 1===t.length?t[0]:t}function N(){var t=s.dependencies.indexedDB,n=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return n&&n.bind(t)}var B=function(){function n(t,n){g.push([t,p.call(arguments,1)])}function e(){var n=g;g=[];for(var e=0,r=n.length;r>e;++e){var o=n[e];o[0].apply(t,o[1])}}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],this._catched=!1;var n=this,e=!0;this._PSD=r.PSD;try{h(this,t,function(t){e?m(a,n,t):a(n,t)},function(t){return e?(m(c,n,t),!1):c(n,t)})}finally{e=!1}}function o(t,o){if(null===t._state)return void t._deferreds.push(o);var i=t._state?o.onFulfilled:o.onRejected;if(null===i)return(t._state?o.resolve:o.reject)(t._value);var u,a=y;y=!1,m=n;try{var c=r.PSD;r.PSD=t._PSD,u=i(t._value),t._state||u&&"function"==typeof u.then&&u._state===!1||s(t),o.resolve(u)}catch(f){var l=o.reject(f);if(!l&&t.onuncatched)try{t.onuncatched(f)}catch(f){}}finally{if(r.PSD=c,a){do{for(;g.length>0;)e();var h=b.pop();if(h)try{h()}catch(f){}}while(b.length>0||g.length>0);m=d,y=!0}}}function i(t){var r=y;y=!1,m=n;try{t()}finally{if(r){do{for(;g.length>0;)e();var o=b.pop();if(o)try{o()}catch(i){}}while(b.length>0||g.length>0);m=d,y=!0}}}function s(t){t._catched=!0,t._parent&&s(t._parent)}function a(t,n){var e=r.PSD;r.PSD=t._PSD;try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then)return void h(t,function(t,e){n.then(t,e)},function(n){a(t,n)},function(n){c(t,n)});t._state=!0,t._value=n,f.call(t)}catch(o){c(o)}finally{r.PSD=e}}function c(t,n){var e=r.PSD;if(r.PSD=t._PSD,t._state=!1,t._value=n,f.call(t),!t._catched)try{t.onuncatched&&t.onuncatched(t._value),r.on.error.fire(t._value)}catch(o){}return r.PSD=e,t._catched}function f(){for(var t=0,n=this._deferreds.length;n>t;t++)o(this,this._deferreds[t]);this._deferreds=[]}function l(t,n,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.resolve=e,this.reject=r}function h(t,n,e,r){var o=!1;try{n(function(t){o||(o=!0,e(t))},function(n){return o?t._catched:(o=!0,r(n))})}catch(i){if(o)return;return r(i)}}var p=[].slice,d="undefined"==typeof setImmediate?function(n,e,r,o){var i=arguments;setTimeout(function(){n.apply(t,p.call(i,1))},0)}:setImmediate,m=d,y=!0,g=[],b=[];return r.on=v(null,"error"),r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new r(function(n,e){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var u=s.then;if("function"==typeof u)return void u.call(s,function(t){r(i,t)},e)}t[i]=s,0===--o&&n(t)}catch(a){e(a)}}if(0===t.length)return n([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},r.prototype.then=function(t,n){var e=this,i=new r(function(r,i){null===e._state?o(e,new l(t,n,r,i)):m(o,e,new l(t,n,r,i))});return i._PSD=this._PSD,i.onuncatched=this.onuncatched,i._parent=this,i},r.prototype._then=function(t,n){o(this,new l(t,n,u,u))},r.prototype["catch"]=function(t){if(1===arguments.length)return this.then(null,t);var n=arguments[0],e=arguments[1];return"function"==typeof n?this.then(null,function(t){return t instanceof n?e(t):r.reject(t)}):this.then(null,function(t){return t&&t.name===n?e(t):r.reject(t)})},r.prototype["finally"]=function(t){return this.then(function(n){return t(),n},function(n){return t(),r.reject(n)})},r.prototype.onuncatched=null,r.resolve=function(t){var n=new r(function(){});return n._state=!0,n._value=t,n},r.reject=function(t){var n=new r(function(){});return n._state=!1,n._value=t,n},r.race=function(t){return new r(function(n,e){t.map(function(t){t.then(n,e)})})},r.PSD=null,r.newPSD=function(t){var n=r.PSD;r.PSD=n?Object.create(n):{};try{return t()}finally{r.PSD=n}},r._rootExec=i,r._tickFinalize=function(t){if(y)throw new Error("Not in a virtual tick");b.push(t)},r}(),R=function(){};o(U).from(Error),s["delete"]=function(t){var n=new s(t),e=n["delete"]();return e.onblocked=function(t){return n.on("blocked",t),this},e},s.getDatabaseNames=function(t){return new B(function(t,n){var e=N();if(e){var r=e();r.onsuccess=function(n){t([].slice.call(n.target.result,0))},r.onerror=C(n)}else A(function(n){return t(n),!1})}).then(t)},s.defineClass=function(t){function n(t){t&&r(this,t)}return E(n.prototype,t),n},s.ignoreTransaction=function(t){return B.newPSD(function(){return B.PSD.trans=null,t()})},s.spawn=function(){return t.console&&console.warn("Dexie.spawn() is deprecated. Use Dexie.ignoreTransaction() instead."),s.ignoreTransaction.apply(this,arguments)},s.vip=function(t){return B.newPSD(function(){return B.PSD.letThrough=!0,t()})},Object.defineProperty(s,"currentTransaction",{get:function(){return B.PSD&&B.PSD.trans||null}}),s.Promise=B,s.derive=o,s.extend=r,s.override=i,s.events=v,s.getByKeyPath=x,s.setByKeyPath=k,s.delByKeyPath=S,s.shallowClone=O,s.deepClone=j,s.addons=[],s.fakeAutoComplete=R,s.asap=b,s.ModifyError=U,s.MultiModifyError=U,s.IndexSpec=q,s.TableSchema=L;var F=t.idbModules&&t.idbModules.shimIndexedDB?t.idbModules:{};s.dependencies={indexedDB:F.shimIndexedDB||t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB,IDBKeyRange:F.IDBKeyRange||t.IDBKeyRange||t.webkitIDBKeyRange,IDBTransaction:F.IDBTransaction||t.IDBTransaction||t.webkitIDBTransaction,Error:t.Error||String,SyntaxError:t.SyntaxError||String,TypeError:t.TypeError||String,DOMError:t.DOMError||String,localStorage:null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:t.localStorage},s.version=1.1,n("Dexie",s),w(function(){R=w})}).apply(null,"function"==typeof define&&define.amd?[self||window,function(t,n){define(t,function(){return n})}]:"undefined"!=typeof t&&"undefined"!=typeof n&&n.exports?[t,function(t,e){n.exports=e}]:[self||window,function(t,n){(self||window)[t]=n}])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[9]);
//# sourceMappingURL=..\background.min.js.map